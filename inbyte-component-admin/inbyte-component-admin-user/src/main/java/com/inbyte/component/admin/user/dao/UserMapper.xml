<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.inbyte.component.admin.user.dao.UserMapper">

    <select id="brief" parameterType="Integer" resultType="com.inbyte.component.admin.user.model.UserBrief">
        SELECT userId,
               tel,
               nickName,
               realName,
               avatarUrl,
               remark
          FROM user
         WHERE userId = #{userId, jdbcType=INTEGER}
    </select>

    <select id="briefByTel" resultType="com.inbyte.component.admin.user.model.UserBrief">
        SELECT userId,
               tel,
               nickName,
               realName,
               avatarUrl,
               remark
          FROM user
         WHERE tel = #{tel}
    </select>

    <select id="detail" parameterType="Integer" resultType="com.inbyte.component.admin.user.model.UserDetail">
        SELECT userId,
               tel,
               userName,
               nickName,
               realName,
               avatarUrl,
               createTime,
               updateTime,
               remark
          FROM user
         WHERE userId = #{userId, jdbcType=INTEGER}
    </select>

    <select id="list" resultType="com.inbyte.component.admin.user.model.UserBrief">
        SELECT userId,
               tel,
               userName,
               nickName,
               realName,
               gender,
               avatarUrl,
               createTime,
               remark
          FROM user
         WHERE deleted = 0
        <if test="startDate != null">
           AND createTime &gt; #{startDate, jdbcType=TIMESTAMP}
        </if>
        <if test="endDate != null">
           AND createTime &lt; #{endDate, jdbcType=TIMESTAMP}
        </if>
        <if test="keyword != null and keyword != ''">
            AND (userName LIKE CONCAT('%', #{keyword}, '%')
            OR tel LIKE CONCAT('%', #{keyword}, '%'))
        </if>
         ORDER BY userId DESC
    </select>

    <select id="dict" resultType="com.inbyte.component.admin.user.model.UserDictBrief">
        SELECT userId,
               tel,
               nickName,
               avatarUrl,
               createTime
          FROM user
         WHERE deleted = 0
        <if test="startDate != null">
           AND createTime &gt; #{startDate, jdbcType=TIMESTAMP}
        </if>
        <if test="endDate != null">
           AND createTime &lt; #{endDate, jdbcType=TIMESTAMP}
        </if>
        <if test="keyword != null and keyword != ''">
           AND (nickName LIKE CONCAT('%', #{keyword}, '%')
           OR tel LIKE CONCAT('%', #{keyword}, '%'))
        </if>
        ORDER BY createTime DESC
    </select>
</mapper>
